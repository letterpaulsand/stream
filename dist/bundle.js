(()=>{const e=document.getElementById("app"),t=document.getElementById("video"),n=document.getElementById("streamId"),o=document.getElementById("btn"),c=document.getElementById("container");var a=new Peer;function d(e){let t=e.currentTime,n=!1;setInterval((async()=>{if(n)return;let o=e.currentTime;t==o?(console.log("left"),e.style.display="none",n=!0):t=e.currentTime}),3e3)}function l(e,t,n){document.querySelector(`[data-code='${e}']`)||(t.dataset.code=e,t.classList.add("video"),t.srcObject=n,t.dataset.code=e,t.autoplay=!0,c.appendChild(t))}document.getElementById("video1"),new URL(location.href).searchParams.get("v"),a.on("open",(function(t){e.innerText=`My id is : ${t}`})),async function(){let e={video:!0,audio:!0};try{let c=await navigator.mediaDevices.getUserMedia(e);t.srcObject=c,a.on("call",(async e=>{e.answer(c),e.on("stream",(t=>{let n=document.createElement("video");l(e.peer,n,t),d(n)}))})),o.addEventListener("click",(()=>{!async function(e,t){console.log("I call someone",n.value),a.call(e,t).on("stream",(t=>{console.log("hi");let n=document.createElement("video");l(e,n,t),d(n)}))}(n.value,c)}))}catch(e){console.error(e)}}()})();
//# sourceMappingURL=bundle.js.map